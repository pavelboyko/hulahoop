{% extends "mpa/base.html" %}
{% load humanize %}

{% block title %}Issues — {{ project.name }}{% endblock title %}

{% block breadcrumb %}
<li class="breadcrumb-item active" aria-current="page">{{ project.name | truncatechars:32 }}</li>
{% endblock breadcrumb%}

{% block header %}
<h1 class="display-6">{{ project.name }}</h1>
{% endblock header %}

{% block tabs %}
<ul class="nav">
    <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="#">Issues</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'example_list' project.id %}">Examples</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'project_dashboard' project.id %}">Insights</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'project_settings' project.id %}">Settings</a>
    </li>
</ul>
{% endblock tabs %}


{% block main %}

{% if issues %}
<ul class="list-group">
    {% for issue in issues %}
    <li class="list-group-item d-flex flex-column list-group-item-action">
        <a href="{% url 'issue_detail' project.id issue.id %}" class="fs-5 text-decoration-none stretched-link">{{ issue.display_name }}</a>
        <small class="text-muted">
            <span class="badge rounded-pill bage-bg-{{ issue.get_status_display|lower }}">
                {{ issue.get_status_display }}
            </span>
            &nbsp; {% with count=issue.example_count %}{% if count %}{{ count | intcomma }}{% else %}No{% endif %} example{{ count | pluralize }}{% endwith %}
            • Created {{ issue.created_at | naturaltime }}
            • Updated {{ issue.updated_at | naturaltime }}
        </small>
    </li>
    {% endfor %}
</ul>
{% else %}
<p>
    No issues found.
</p>
{% endif %}

{% endblock main %}

